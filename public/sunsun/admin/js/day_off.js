!function(a){var t=new Date,e=t.getFullYear();function n(t){for(var e=1;e<=12;e++)e<10&&(e="0"+e),a("#date_"+e).datepicker({language:"ja",autoclose:!1,weekStart:1,maxViewMode:0,daysOfWeekDisabled:"3,4"}).datepicker("setDate",new Date(t,e,null))}function r(){for(var t=0;t<count_holiday;t++)for(var e=list_holiday[t].split("/"),n=e[1],r=e[2],d=a("#date_"+n).find(".day"),i=0;i<d.length;i++){var o=d[i].innerText;if(o.length<2&&(o="0"+o),o==r&&"day"==d[i].className){var l=a(d[i]).attr("data-date");a("#date_"+n+" [data-date="+l+"]").addClass("active-date")}}}function d(){for(var e=1;e<=12;e++)e<10&&(e="0"+e),a("#date_"+e+" .table-condensed td.day").on("click",(function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var n=a("#input-current__date").val(),r=t.getMonth()+1,d=t.getDate(),i=t.getFullYear();if(n>i)a(this).hasClass("disabled")||a(this).toggleClass("active-date").removeClass("active");else{if(n<i)return alert("休日が過去の日付に設定できません。"),!1;r<10&&(r="0"+r);for(var o=a("#date_"+r).find(".day"),l=0;l<o.length;l++)if(o[l].innerText==d)var s=a(o[l]).attr("data-date");if(!(s<a(this).attr("data-date")))return alert("休日が過去の日付に設定できません。"),!1;a(this).hasClass("disabled")||a(this).toggleClass("active-date").removeClass("active")}}))}n(e),d(),a("#input-current__date").val(e),a(".datepicker-switch").attr("colspan","7"),current_day=a("#input-current__date"),date_day=current_day.datepicker({language:"ja",autoclose:!1,weekStart:1,format:"yyyy",minViewMode:"years"}).on("changeYear",(function(t){var e=t.date.getFullYear();n(e),function(t){a.ajax({url:url_ajax,type:"POST",data:{year_search:t},dataType:"JSON",beforeSend:function(){loader.css({display:"block"})},success:function(a){1==a.status&&(list_holiday=a.data.list_holiday,count_holiday=list_holiday.length,r())},complete:function(){loader.css({display:"none"})}})}(e),d()})),a("#button-current__date").off("click"),a("#button-current__date").on("click",(function(t){a("#input-current__date").focus()})),r(),a(document).on("click","#submitButton",(function(){for(var t=[],e=a("#input-current__date").val(),n=1;n<=12;n++){n<10&&(n="0"+n);for(var r=a("#date_"+n).find(".active-date"),d=0;d<r.length;d++){var i=r[d].innerText;i.length<2&&(i="0"+i);var o=e+n+i;t.push(o)}}!function(t,e){a.ajax({url:url_submit,type:"POST",data:{year:t,data:e},dataType:"JSON",beforeSend:function(){loader.css({display:"block"})},success:function(a){1==a.status&&(window.location.reload(),alert("保存に成功しました。"))},complete:function(){loader.css({display:"none"})}})}(e,t)}))}(jQuery);
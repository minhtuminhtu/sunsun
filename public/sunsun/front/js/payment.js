!function(e){var r={};function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(a,n,function(r){return e[r]}.bind(null,n));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=10)}({10:function(e,r,t){e.exports=t(11)},11:function(e,r){$((function(){$(".payment-method").off("change"),$(".payment-method").on("change",(function(){"credit-card"==$(this).prop("id")?$(".credit-card").show():$(".credit-card").hide()})),$("#card-number, #card-expire, #card-secret").off("keypress"),$("#card-number, #card-expire, #card-secret").on("keypress",(function(e){(e.which<48||e.which>57)&&e.preventDefault()})),$("#card-number").off("keyup"),$("#card-number").on("keyup",(function(e){if(0!==$("#card-number").val().length){switch($("#card-number").val($("#card-number").val().replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim()),function(e){if(!function(e){if(!/^[\d\-\s]+$/.test(e))return!1;for(var r=0,t=0,a=!1,n=e.replace(/\D/g,""),i=n.length-1;i>=0;i--){var s=n.charAt(i);t=parseInt(s,10),a&&(t*=2)>9&&(t-=9),r+=t,a=!a}return r%10==0}(e))return"";for(var r="",t=[{regEx:/^4[0-9]{5}/gi,cardType:"VISA"},{regEx:/^5[1-5][0-9]{4}/gi,cardType:"MASTERCARD"},{regEx:/^3[47][0-9]{3}/gi,cardType:"AMEX"},{regEx:/^(5[06-8]\d{4}|6\d{5})/gi,cardType:"MAESTRO"},{regEx:/^(?:2131|1800|35\d{3})\d{11}$/gi,cardType:"JCB"}],a=0;a<t.length;a++)if(e.match(t[a].regEx)){r=t[a].cardType;break}if(0===e.indexOf("50")||0===e.indexOf("60")||0===e.indexOf("65"))for(var n="508500-508999|606985-607984|608001-608500|652150-653149".split("|"),i=0;i<n.length;i++){var s=parseInt(n[i].split("-")[0],10),c=parseInt(n[i].split("-")[1],10);if(e.substr(0,6)>=s&&e.substr(0,6)<=c&&e.length>=6){r="RUPAY";break}}return r}($("#card-number").val().replace(/\s/g,""))){case"VISA":$(".card-img").html('<i class="fab fa-cc-visa fa-2x"></i>');break;case"MASTERCARD":$(".card-img").html('<i class="fab fa-cc-mastercard fa-2x"></i>');break;case"AMEX":$(".card-img").html('<i class="fab fa-cc-amex fa-2x"></i>');break;case"JCB":$(".card-img").html('<i class="fab fa-cc-jcb fa-2x"></i>');break;default:$(".card-img").html('<img src="https://galacticglasses.com/image/bank_def.png" class="img-fluid scale-image" alt="">')}$(this).parent().find("span:first-child").css("display","inline"),$(this).removeClass("typing-none"),$(this).addClass("typing")}else console.log("bbb"),$(this).parent().find("span:first-child").css("display","none"),$(this).removeClass("typing"),$(this).addClass("typing-none")})),$("#card-expire").off("keyup"),$("#card-expire").on("keyup",(function(){if(0!==$("#card-expire").val().length){$(this).parent().find("span:first-child").css("display","inline"),$(this).removeClass("typing-none"),$(this).addClass("typing");var e=$("#card-expire").val().replace(/\D/g,"").replace(/(\d{2})/g,"$1/").trim();6!=e.length&&3!=e.length||(e=e.slice(0,-1)),$("#card-expire").val(e)}else $(this).parent().find("span:first-child").css("display","none"),$(this).removeClass("typing"),$(this).addClass("typing-none")})),$("#card-secret").off("keyup"),$("#card-secret").on("keyup",(function(){0!==$("#card-secret").val().length?($(this).parent().find("span:first-child").css("display","inline"),$(this).removeClass("typing-none"),$(this).addClass("typing")):($(this).parent().find("span:first-child").css("display","none"),$(this).removeClass("typing"),$(this).addClass("typing-none"))})),$("#make_payment").off("click"),$("#make_payment").on("click",(function(){e()}));var e=function(){"1"===$("input[type=radio][name=payment-method]:checked").val()&&function(){Multipayment.init("tshop00042155");var e=$("#card-number").val().replace(/\s/g,""),r=$("#card-expire").val(),t=$("#card-secret").val().replace(/\D/g,"");cardExpireMonth=r.split("/")[0],cardExpireYear="20"+r.split("/")[1],r=cardExpireYear.toString()+cardExpireMonth.toString(),Multipayment.getToken({cardno:e,expire:r,securitycode:t,holdername:"HOLDER NAME",tokennumber:1},execPurchase)}()}}));"undefined"==typeof execPurchase&&(execPurchase=function(e){var r;console.log(e),"000"!=e.resultCode?window.alert("購入処理中にエラーが発生しました"):($("#Token").val(e.tokenObject.token),r=$("form.booking").serializeArray(),$("#Token").val(""),console.log(r),$.ajax({url:"/make_payment",type:"POST",data:r,dataType:"text",beforeSend:function(){loader.css({display:"block"})},success:function(e){void 0!==(e=JSON.parse(e)).error?(Swal.fire({icon:"error",title:"エラー",text:" 入力した情報を再確認してください。",confirmButtonColor:"#d7751e",confirmButtonText:"もう一度やり直してください。",showClass:{popup:"animated zoomIn faster"},hideClass:{popup:"animated zoomOut faster"},allowOutsideClick:!1}),$("p.note-error").remove(),$.each(e.error,(function(e,r){switch($("#"+r).css({border:"solid 1px #f50000"}),r){case"name":$("#"+r).parent().after('<p class="note-error node-text"> 入力されている名前は無効になっています。</p>');break;case"phone":$("#"+r).parent().after('<p class="note-error node-text"> 電話番号は無効になっています。</p>');break;case"email":$("#"+r).parent().after('<p class="note-error node-text"> ﾒｰﾙｱﾄﾞﾚｽは無効になっています。</p>')}})),$.each(e.clear,(function(e,r){$("#"+r).css({border:"solid 1px #ced4da"})}))):void 0!==e.status&&"success"==e.status?($("#bookingID").val(e.message.bookingID),$("#tranID").val(e.message.tranID),$("#completeForm").submit()):void 0!==e.status&&"error"==e.status&&Swal.fire({icon:"error",title:"エラー",text:e.message,confirmButtonColor:"#d7751e",confirmButtonText:e.message,showClass:{popup:"animated zoomIn faster"},hideClass:{popup:"animated zoomOut faster"},allowOutsideClick:!1})},complete:function(){loader.css({display:"none"})}}))})}});